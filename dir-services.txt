- Configure hostname:
$ hostnamectl set-hostname <name>

- Configure IP address:
$ sudo nmcli connection modify enp1s0 ipv4.address <ip-address/mask>
$ sudo nmcli connection modify enp1s0 ipv4.dns <dns-ip>
$ sudo nmcli connection modify enp1s0 ipv4.gateway <gateway-ip>
$ sudo nmcli connection modify enp1s0 ipv4.method manual
$ sudo nmcli connection down enp1s0
$ sudo nmcli connection up enp1s0

- Test connectivity with a network system:
$ ping <ip-address>

# Verify server tools are installed:
$ sudo dnf info samba
$ sudo dnf info ipa-server
$ sudo dnf info <server-software-of-choosing>

$ sudo dnf install <service>

- Installing ipa-server
$ sudo ipa-server-install

# You will be prompted:
~ Do you want to configure integrated DNS (BIDN)? [no/yes]

# - If Integrated DNS (Yes)
# FreeIPA will act as both directory server + DNS server.
# Useful if you donâ€™t have another DNS server.
# But it may conflict with your existing DNS-VM on the same lab subnets.

# - If Integrated DNS (No)
# FreeIPA will only manage identity (users, groups, Kerberos, certificates).
# Continue using your existing DNS-VM for name resolution.
# Recommended in your lab since DNS-VM is already authoritative for the lab subnets.


Enter the fully qualified domain name of the computer
on which you're setting up server software.  Using the form <hostname>.<domainname>
Example:  master.example.com

Server host name [your-server]: <FQDN.local.lab> hit "Enter"
(To verify, open a separate terminal "hostnamectl"

Please confirm the domain name [local.lab]: local.lab

Please provide a realm name [LOCAL.LAB]:  LOCAL.LAB

Directory Manager password:
Password (confirm):

The IPA server requires an admimistrative user, named '<user>'.
This user is a regular system account used for IPA server administration.

IPA <user> password:
Password (confirm):

Trust is configured but no NetBIOS domain name found, setting it now.
Enter the NetBIOS name for the IPA domain.
Only up to 15 uppercase ASCII letters, digits and dashes are allowed.

NetBIOS domain name [LAB]:  LAB

Do you want to configure chrony with NTP server or pool address? [no/yes]
Enter NTP source server addresses separated by comma, or press Enter to skip: <server-IP_or_server-name>
Enter a NTP source pool address, or press Enter to skip:

The IPA Master Server will be configured with:
...
...
...
Continue to configure the system with these values? [no/yes]:
...
...
...
The ipa-server-install command was successful

Next Steps:
	1. You must make sure these network ports are open:
		TCP Ports:
		* 80, 443:HTTP/HTTPS
		* 389, 636: LDAP/LDAPS
		* 88, 464: kerberos
		* 53: bind
		UDP Ports:
		*88, 464: kerberos
		* 53: bind
		* 123: ntp
	2. You can now obtain a kerberos ticket using the command: 'kinit <user>'
	    This ticket will allow you to use the IPA tools (e.g., ipa user-add)
	    and the web user interface.

Be sure to back up the CA certificated stored in /root/cacert.p12
These files are required to create replicas.  The password for these
files is the Directory Manager password.
The ipa-server-install command was successful


- Verify Kerberos Authentication:
$ kinit admin
$ klist   # should show a valid ticket

- Ensures LDAP and Kerberos are working correctly:
$ ipa user-find
$ ipa group-find

- Back Up Certificates
$ sudo ls /root/cacert.p12
**Note:** - Required for creating replicas or restoring your CA.

- Open required network ports:
$ sudo firewall-cmd --permanent --add-port=80/tcp    # HTTP
$ sudo firewall-cmd --permanent --add-port=443/tcp   # HTTPS
$ sudo firewall-cmd --permanent --add-port=389/tcp   # LDAP
$ sudo firewall-cmd --permanent --add-port=636/tcp   # LDAPS
$ sudo firewall-cmd --permanent --add-port=88/tcp    # Kerberos
$ sudo firewall-cmd --permanent --add-port=464/tcp   # Kerberos password change
$ sudo firewall-cmd --permanent --add-port=53/tcp    # DNS
$ sudo firewall-cmd --permanent --add-port=53/udp    # DNS
$ sudo firewall-cmd --permanent --add-port=88/udp    # Kerberos
$ sudo firewall-cmd --permanent --add-port=464/udp   # Kerberos password change
$ sudo firewall-cmd --permanent --add-port=123/udp   # NTP

- Reload firewall to apply changes:
$ sudo firewall-cmd --reload

- Verify open ports:
$ sudo firewall-cmd --list-ports
$ sudo firewall-cmd --list-all


- Verify presence of file and back up certificates:
$ ls /root/cacert.p12
$ sudo cp /root/cacert.p12 /path/to/backups/
$ sudo chown <your-user>:<your-user> /path/to/backups/cacert.p12
$ sudo chmod 600 /path/to/backups/cacert.p12

**IMPORTANT:**   - Always keep at least one copy off the Server/VM.
		- Protect the backup with strong permissions (chmod 600).
		- Needed if you plan to create replicas, migrate the CA, or restore a broken DS VM.

- Join Lab Client VMs
        Once verified, other VMs (e.g., web1, db1) can join the FreeIPA domain for centralized authentication.
- Modify /etc/resolv.conf
nameserver <ip-of-services-server> 
search local.lab

Save & Exit

- Install ipa package
$ sudo dnf install ipa-client

